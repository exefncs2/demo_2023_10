# api使用說明
## 執行job
最常用的功能 基本dag要保持開啟
```
類型 : POST
網址 : http://127.0.0.1:5555/api/v1/dags/<dag_id>/dagRuns 

參數 :
  {
  "conf": {<可以帶任何參數>},
  "dag_run_id": <dag_run_id自訂一個id之後要使用搜尋都用他>,
  "logical_date": <帶時間>,
  "note": "文字說明"
}
```

## 搜尋DAG
很核心的功能 如果要建立自動化 取得dag_id的手段必不可少
能用的參數網址後面加上&
| Name           | 描述                                                       |
|--------------- |------------------------------------------------------------ |
| limit          | 整數（查詢） - 要返回的項目數。                             |
| offset         | 整數（查詢） - 開始收集結果集之前要跳過的項目數。           |
| order_by       | 字串（查詢） - 用來排序結果的字段名稱。在字段名前加 - 以反轉排序順序。 |
| tags           | 字串陣列（查詢） - 用於過濾結果的標籤清單。                  |
| only_active    | 布林值（查詢） - 只過濾活躍的DAG。                         |
| paused         | 布林值（查詢） - 只過濾已暫停/未暫停的DAG。如果缺席或為null，則返回已暫停和未暫停的DAG。 |
| dag_id_pattern  | 字串（查詢） - 如果設置，僅返回dag_ids匹配此模式的DAG。      |


```
類型 : GET
網址 : http://127.0.0.1:5555/api/v1/dags
能用的參數較多已在上方有說明

  ```

### 強改結果
 如果有上下游 需要強改結果 例如A沒成功B不能跑 但A人工修正後不會再跑但要讓B跑就要把A的結果改成success
 又或者反過來 不要讓後面繼續執行改成failed 需要再跑queued
 

```
類型 : PATCH
網址 : http://127.0.0.1:5555/api/v1/dags/{<dag_id>}/dagRuns/{<dag_run_id就是剛剛自訂的>}
 
 參數只有
 {
  "state": "<三選一>"
}
['success', 'failed', 'queued']
  ```